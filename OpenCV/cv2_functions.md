# Краткая "шпаргалка" по OpenCV-Python

## Общие замечания

Библиотека OpenCV хранит каналы формата RGB в обратном порядке BGR: синий, зеленый и красный.

## Подключение библиотеки

import cv2 as cv

## Чтение, вывод и сохранение изображения

image = cv.**imread**(<"имя файла">)

cv.**imshow**(["имя окна"], <изображение>)</br>
cv.**waitKey**() - ожидание нажатия клавиши

cv.**imwrite**(<"имя файла">, <изображение>)

## Работа с пикселями

px = img[100, 100] - получить значение цветовых каналов одного пикселя

blue = img[100:150, 100:150, 0] - взятие 0 канала(синего) для диапазона пикселей

img[100:150, 100:150] = [255, 255, 255] - присваивание цвета определенному диапазону пикселей 

img.**item**(10, 10, 2) - получение данных о канале пикселя(работает быстрее)

img.**itemset**((10, 10, 2), 100) - установка значения канала пикселя(работает быстрее)

### Взятие и присваивание частей изображения

sub_arr = img[200:250, 200:250]</br>
img[100:150, 100:150] = sub_arr

### Общий вид

img[ <диапазон пикселей>, <диапазон пикселей>, [номер канала] ]

**Номера каналов:**

1. 0 - синий
2. 1 - зеленый
3. 2 - красный

## Создание рамки

img_with_border = cv.**copyMakeBorder**(img, 150, 150, 150, 150, cv.BORDER_CONSTANT)

cv.**copyMakeBorder**([входное изображение], [размер top], [размер bottom], [размер left], [размер right], [тип рамки])

## Смешивание изображений

result_img = cv.**addWeighted**(img1, 0.7, img2, 0.3)

cv.**addWeighted**([первое изображение], [коэфицент 1], [второе изображение], [коэфицент 2])</br>
[итоговое изображение] = [первое изображение] * [коэфицент 1] + [второе изображение] * [коэфицент 2]

## Размер изображения

img.**shape**</br>
вернет "массив": [[ширина], [высота], [количество каналов]]

## Вращение и смещение

(h, w) = img.**shape**[:2]</br>
center = ((int(w / 2), int(h / 2)))

rotation_matrix = cv.**getRotationMatrix2D**(center, 45, 0.6)</br>
rotated = cv.**warpAffine**(img, rotation_matrix, (w, h))

cv.**getRotationMatrix2D**([центр вращения], [угол поворота], [коэфицент увеличени изображения])

cv.**warpAffine**([изображение], [матрицы поворота], [размеры изображения])

## Размытие 

kernel = cv.getStructuringElement(cv.MORPH_ELLIPSE, (7, 7))</br>
image_erode = cv.erode(image, kernel)

cv.**getStructuringElement**([тип элемента мат.марфологии], [(размер 1, размер 2)]) - возвращает ядро мат.марфологии(матрицу нулей и единиц)

cv.**erode**([изображение], [ядро мат. марфологии]) - произовдит размытие на основе ядра

## Изменение цветового пространства

hsv_img = cv.cvtColor(erimg, cv.COLOR_BGR2HSV)</br>
cv.imshow("2_2.jpg", hsv_img)

hsv_img = cv.cvtColor(erimg, cv.COLOR_BGR2GRAY)</br>
cv.imshow("2_3.jpg", hsv_img)

cv.**cvtColor**([изображение], [из какого в какое]) - вернет изображение переведенное в другое цветовое пространство

